# Payment OTP Verification Flow Chart

## ğŸ“Š Complete Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER OPENS APP                           â”‚
â”‚              (Send Payment Screen)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         USER FILLS PAYMENT FORM                              â”‚
â”‚  â€¢ Receiver Aadhaar Number                                   â”‚
â”‚  â€¢ Amount                                                    â”‚
â”‚  â€¢ Mobile Number (Optional)                                  â”‚
â”‚  â€¢ Interest (Optional)                                       â”‚
â”‚  â€¢ Proof Documents (Optional)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      USER CLICKS "SEND PAYMENT REQUEST" BUTTON              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FORM VALIDATION                                 â”‚
â”‚  âœ“ Check all required fields                                â”‚
â”‚  âœ“ Validate Aadhaar format (12 digits)                      â”‚
â”‚  âœ“ Validate amount (must be > 0)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚ Valid? â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                   NO         YES
                    â”‚          â”‚
                    â”‚          â–¼
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  â”‚  CHECK USER'S PROFILE AADHAAR        â”‚
                    â”‚  â”‚  VERIFICATION STATUS                 â”‚
                    â”‚  â”‚                                      â”‚
                    â”‚  â”‚  Get: user.aadharVerified            â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                   â”‚
                    â”‚              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚              â”‚Verified?â”‚
                    â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                    â”‚                   â”‚
                    â”‚              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚             NO         YES
                    â”‚              â”‚          â”‚
                    â”‚              â”‚          â–¼
                    â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚  â”‚  GENERATE OTP FOR RECEIVER          â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  POST /api/aadhar/generate-otp      â”‚
                    â”‚              â”‚  â”‚  Body: { aadhar: "receiver_aadhar" } â”‚
                    â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚                 â”‚
                    â”‚              â”‚                 â–¼
                    â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚  â”‚  BACKEND PROCESSES OTP REQUEST       â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  Development Mode:                    â”‚
                    â”‚              â”‚  â”‚    â†’ Fixed OTP: "123456"              â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  Production Mode:                     â”‚
                    â”‚              â”‚  â”‚    â†’ Call QuickeKYC API              â”‚
                    â”‚              â”‚  â”‚    â†’ Generate real OTP               â”‚
                    â”‚              â”‚  â”‚    â†’ Send SMS to receiver's mobile   â”‚
                    â”‚              â”‚  â”‚    â†’ Store OTP in database            â”‚
                    â”‚              â”‚  â”‚    â†’ Set expiration (5 minutes)      â”‚
                    â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚                 â”‚
                    â”‚              â”‚                 â–¼
                    â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚  â”‚  OTP SENT SUCCESSFULLY               â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  Show OTP Input Bottom Sheet         â”‚
                    â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚                 â”‚
                    â”‚              â”‚                 â–¼
                    â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚  â”‚  USER ENTERS 6-DIGIT OTP             â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  User types OTP received on mobile   â”‚
                    â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚                 â”‚
                    â”‚              â”‚                 â–¼
                    â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚  â”‚  USER CLICKS "VERIFY & SUBMIT"       â”‚
                    â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚                 â”‚
                    â”‚              â”‚                 â–¼
                    â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚  â”‚  VERIFY OTP WITH BACKEND             â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  POST /api/aadhar/verify-otp         â”‚
                    â”‚              â”‚  â”‚  Body: {                              â”‚
                    â”‚              â”‚  â”‚    aadhar: "receiver_aadhar",       â”‚
                    â”‚              â”‚  â”‚    otp: "123456"                     â”‚
                    â”‚              â”‚  â”‚  }                                    â”‚
                    â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚                 â”‚
                    â”‚              â”‚                 â–¼
                    â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚  â”‚  BACKEND VERIFICATION PROCESS        â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  1. Find OTP record in database       â”‚
                    â”‚              â”‚  â”‚     (most recent for this Aadhaar)   â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  2. Check if OTP expired?            â”‚
                    â”‚              â”‚  â”‚     â†’ If expired: Return error       â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  3. Development Mode:                â”‚
                    â”‚              â”‚  â”‚     â†’ Accept OTP "123456"             â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  4. Production Mode:                 â”‚
                    â”‚              â”‚  â”‚     â†’ Call QuickeKYC API             â”‚
                    â”‚              â”‚  â”‚     â†’ POST /submit-otp               â”‚
                    â”‚              â”‚  â”‚     â†’ Verify with QuickeKYC          â”‚
                    â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚                 â”‚
                    â”‚              â”‚            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                    â”‚              â”‚            â”‚ Verified? â”‚
                    â”‚              â”‚            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚                  â”‚
                    â”‚              â”‚            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                    â”‚              â”‚           NO          YES
                    â”‚              â”‚            â”‚            â”‚
                    â”‚              â”‚            â”‚            â–¼
                    â”‚              â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚            â”‚  â”‚  CREATE PAYMENT TRANSACTION           â”‚
                    â”‚              â”‚            â”‚  â”‚                                      â”‚
                    â”‚              â”‚            â”‚  â”‚  POST /api/payment/send               â”‚
                    â”‚              â”‚            â”‚  â”‚  Body: {                              â”‚
                    â”‚              â”‚            â”‚  â”‚    aadhar: "receiver_aadhar",       â”‚
                    â”‚              â”‚            â”‚  â”‚    amount: 1000,                     â”‚
                    â”‚              â”‚            â”‚  â”‚    mobile: "9876543210",             â”‚
                    â”‚              â”‚            â”‚  â”‚    interest: 100,                     â”‚
                    â”‚              â”‚            â”‚  â”‚    documents: [...]                   â”‚
                    â”‚              â”‚            â”‚  â”‚  }                                    â”‚
                    â”‚              â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚            â”‚                 â”‚
                    â”‚              â”‚            â”‚                 â–¼
                    â”‚              â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚            â”‚  â”‚  PAYMENT TRANSACTION CREATED          â”‚
                    â”‚              â”‚            â”‚  â”‚                                      â”‚
                    â”‚              â”‚            â”‚  â”‚  â€¢ Transaction ID generated           â”‚
                    â”‚              â”‚            â”‚  â”‚  â€¢ Status: "pending"                  â”‚
                    â”‚              â”‚            â”‚  â”‚  â€¢ Created timestamp                  â”‚
                    â”‚              â”‚            â”‚  â”‚  â€¢ Documents uploaded to GCP         â”‚
                    â”‚              â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚            â”‚                 â”‚
                    â”‚              â”‚            â”‚                 â–¼
                    â”‚              â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚            â”‚  â”‚  NAVIGATE TO SUCCESS SCREEN          â”‚
                    â”‚              â”‚            â”‚  â”‚                                      â”‚
                    â”‚              â”‚            â”‚  â”‚  Show transaction details            â”‚
                    â”‚              â”‚            â”‚  â”‚  Show success message                â”‚
                    â”‚              â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚            â”‚
                    â”‚              â”‚            â–¼
                    â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚  â”‚  SHOW ERROR MESSAGE                   â”‚
                    â”‚              â”‚  â”‚                                      â”‚
                    â”‚              â”‚  â”‚  "Invalid OTP" or                    â”‚
                    â”‚              â”‚  â”‚  "OTP expired" or                     â”‚
                    â”‚              â”‚  â”‚  "OTP verification failed"            â”‚
                    â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚
                    â”‚              â–¼
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  â”‚  SHOW PROFILE NOT VERIFIED DIALOG   â”‚
                    â”‚  â”‚                                      â”‚
                    â”‚  â”‚  âš ï¸  Profile Not Verified           â”‚
                    â”‚  â”‚                                      â”‚
                    â”‚  â”‚  "Your profile Aadhaar is not       â”‚
                    â”‚  â”‚   verified. Please verify your      â”‚
                    â”‚  â”‚   Aadhaar in Profile before         â”‚
                    â”‚  â”‚   sending payment requests."         â”‚
                    â”‚  â”‚                                      â”‚
                    â”‚  â”‚  [Cancel]  [Go to Profile]          â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                 â”‚
                    â”‚            â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚            â”‚ Action? â”‚
                    â”‚            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                    â”‚                 â”‚
                    â”‚            â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚          Cancel    Go to Profile
                    â”‚            â”‚          â”‚
                    â”‚            â”‚          â–¼
                    â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚            â”‚  â”‚  NAVIGATE TO PROFILE SCREEN          â”‚
                    â”‚            â”‚  â”‚                                      â”‚
                    â”‚            â”‚  â”‚  User can verify Aadhaar there       â”‚
                    â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚            â”‚
                    â”‚            â–¼
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  â”‚  STAY ON PAYMENT SCREEN              â”‚
                    â”‚  â”‚  (No OTP sent)                        â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SHOW VALIDATION ERROR                           â”‚
â”‚  "Please enter a valid amount" or                           â”‚
â”‚  "Please enter a valid Aadhaar number"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Simplified Decision Flow

```
START: User clicks "Send Payment Request"
    â”‚
    â”œâ”€â†’ Validate Form
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Invalid? â†’ Show Error â†’ END
    â”‚   â”‚
    â”‚   â””â”€â†’ Valid? â†’ Continue
    â”‚
    â”œâ”€â†’ Check Profile Aadhaar Verification
    â”‚   â”‚
    â”‚   â”œâ”€â†’ NOT Verified? â†’ Show Dialog â†’ END (No OTP sent)
    â”‚   â”‚
    â”‚   â””â”€â†’ Verified? â†’ Continue
    â”‚
    â”œâ”€â†’ Generate OTP for Receiver
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Error? â†’ Show Error â†’ END
    â”‚   â”‚
    â”‚   â””â”€â†’ Success? â†’ Show OTP Input
    â”‚
    â”œâ”€â†’ User Enters OTP
    â”‚
    â”œâ”€â†’ Verify OTP
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Invalid/Expired? â†’ Show Error â†’ END
    â”‚   â”‚
    â”‚   â””â”€â†’ Valid? â†’ Continue
    â”‚
    â”œâ”€â†’ Create Payment Transaction
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Error? â†’ Show Error â†’ END
    â”‚   â”‚
    â”‚   â””â”€â†’ Success? â†’ Show Success Screen â†’ END
```

---

## ğŸ¯ Key Decision Points

### **Decision 1: Form Validation**
```
Is form valid?
â”œâ”€â†’ NO  â†’ Show validation error â†’ STOP
â””â”€â†’ YES â†’ Continue to Decision 2
```

### **Decision 2: Profile Aadhaar Verification** â­ NEW
```
Is user's profile Aadhaar verified?
â”œâ”€â†’ NO  â†’ Show dialog popup â†’ STOP (No OTP sent)
â””â”€â†’ YES â†’ Continue to Decision 3
```

### **Decision 3: OTP Generation**
```
Was OTP generated successfully?
â”œâ”€â†’ NO  â†’ Show error message â†’ STOP
â””â”€â†’ YES â†’ Show OTP input bottom sheet â†’ Continue to Decision 4
```

### **Decision 4: OTP Verification**
```
Is OTP valid and not expired?
â”œâ”€â†’ NO  â†’ Show error message â†’ STOP
â””â”€â†’ YES â†’ Continue to Decision 5
```

### **Decision 5: Payment Creation**
```
Was payment transaction created?
â”œâ”€â†’ NO  â†’ Show error message â†’ STOP
â””â”€â†’ YES â†’ Show success screen â†’ END
```

---

## ğŸ“± User Experience Flow

### **Scenario 1: Profile Not Verified** â­ NEW
```
1. User fills payment form
2. User clicks "Send Payment Request"
3. âš ï¸ Dialog appears: "Profile Not Verified"
4. User clicks "Go to Profile"
5. User verifies Aadhaar in Profile
6. User returns to Payment screen
7. User clicks "Send Payment Request" again
8. âœ… OTP is now sent (profile is verified)
```

### **Scenario 2: Profile Verified (Happy Path)**
```
1. User fills payment form
2. User clicks "Send Payment Request"
3. âœ… OTP is generated and sent
4. User enters OTP
5. User clicks "Verify & Submit"
6. âœ… Payment transaction created
7. âœ… Success screen shown
```

### **Scenario 3: Invalid OTP**
```
1. User fills payment form
2. User clicks "Send Payment Request"
3. âœ… OTP is generated and sent
4. User enters WRONG OTP
5. User clicks "Verify & Submit"
6. âŒ Error: "Invalid OTP code"
7. User can try again or request new OTP
```

---

## ğŸ” Backend Verification Flow

```
POST /api/aadhar/verify-otp
    â”‚
    â”œâ”€â†’ Extract aadhar and otp from request
    â”‚
    â”œâ”€â†’ Development Mode?
    â”‚   â”‚
    â”‚   â”œâ”€â†’ YES â†’ Check if OTP === "123456"
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â†’ YES â†’ Return success âœ…
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â†’ NO â†’ Return error âŒ
    â”‚   â”‚
    â”‚   â””â”€â†’ NO â†’ Continue to production flow
    â”‚
    â”œâ”€â†’ Find OTP record in database
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Not found? â†’ Return error âŒ
    â”‚   â”‚
    â”‚   â””â”€â†’ Found? â†’ Continue
    â”‚
    â”œâ”€â†’ Check if OTP expired?
    â”‚   â”‚
    â”‚   â”œâ”€â†’ YES â†’ Return error âŒ
    â”‚   â”‚
    â”‚   â””â”€â†’ NO â†’ Continue
    â”‚
    â”œâ”€â†’ Provider = "quickekyc"?
    â”‚   â”‚
    â”‚   â”œâ”€â†’ YES â†’ Call QuickeKYC API
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â†’ Success? â†’ Return success âœ…
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â†’ Error? â†’ Return error âŒ
    â”‚   â”‚
    â”‚   â””â”€â†’ NO â†’ Check local OTP code
    â”‚       â”‚
    â”‚       â”œâ”€â†’ Match? â†’ Return success âœ…
    â”‚       â”‚
    â”‚       â””â”€â†’ No match? â†’ Return error âŒ
```

---

## ğŸ¨ Visual Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PAYMENT FLOW                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  1. Fill Form                                            â”‚
â”‚     â†“                                                    â”‚
â”‚  2. Click "Send Payment Request"                        â”‚
â”‚     â†“                                                    â”‚
â”‚  3. âœ… Form Valid?                                        â”‚
â”‚     â†“ YES                                                â”‚
â”‚  4. âœ… Profile Aadhaar Verified? â­ NEW                 â”‚
â”‚     â†“ YES                                                â”‚
â”‚  5. Generate OTP                                         â”‚
â”‚     â†“                                                    â”‚
â”‚  6. User Enters OTP                                     â”‚
â”‚     â†“                                                    â”‚
â”‚  7. âœ… OTP Valid?                                       â”‚
â”‚     â†“ YES                                                â”‚
â”‚  8. Create Payment                                       â”‚
â”‚     â†“                                                    â”‚
â”‚  9. âœ… Success!                                          â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ Error Points

1. **Form Validation Error** â†’ User sees field error
2. **Profile Not Verified** â­ NEW â†’ Dialog popup shown
3. **OTP Generation Error** â†’ Error message shown
4. **OTP Expired** â†’ "OTP expired. Please generate a new OTP."
5. **Invalid OTP** â†’ "Invalid OTP code. Please check and try again."
6. **Payment Creation Error** â†’ Error message shown

---

## âœ… Success Points

1. **OTP Generated** â†’ Bottom sheet appears
2. **OTP Verified** â†’ Payment transaction created
3. **Payment Created** â†’ Success screen shown

